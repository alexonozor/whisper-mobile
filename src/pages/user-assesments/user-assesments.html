<ion-header>  
    <ion-navbar color="primary">
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>Assessments history</ion-title>
      <ion-buttons end>
        <button ion-button icon-only (click)="getContraceptive()">
          <ion-icon name="add"></ion-icon>
        </button>
      </ion-buttons>
    </ion-navbar>

    <ion-toolbar no-border-top>
        <ion-segment [(ngModel)]="assessment">
          <ion-segment-button [value]="true" (click)="ionViewDidLoad()">
            Eligeble
          </ion-segment-button>
          <ion-segment-button [value]="false" (click)="ionViewDidLoad()">
            Not Eligeble
          </ion-segment-button>
        </ion-segment>
      </ion-toolbar>
  </ion-header>


<ion-content>
  <div text-center *ngIf="userAssesments && userAssesments.length <= 0" class="no-assesment">
    <ion-icon name="clipboard" color="home" class="clip"></ion-icon>
    <h4 class="empty">No assessment found</h4>
    <button color="primary" ion-button  small (click)="getContraceptive()">Get a contraceptive</button>
  </div>
   <ion-grid class="assesment-grid">
    <ion-row *ngIf="userAssesments && userAssesments.length > 0">
      <ion-col col-3> <img src="assets/img/touch.png"/> </ion-col>
      <ion-col col-9> 
        <h4 class="more_options">Press and hold each assessment below to view more options</h4>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-1>
        <div class="timeline">
          <ul *ngFor="let assesment of userAssesments">
            <li></li>
          </ul>
        </div>
      </ion-col>
      <ion-col col-1></ion-col>
      <ion-col col-10>
        <ion-card *ngFor="let assesment of userAssesments; let i = index" (press)="openOptions(assesment, i)">
          <ion-card-content *ngIf="assesment?.user">
            <ion-grid>
              <ion-row>
                <ion-col text-left>
                  <h3>{{assesment?.createdAt | date:'longDate'}}</h3>
                </ion-col>
                <ion-col text-right>
                  <h3>{{ assesment?.createdAt | date:'shortTime' }}</h3>
                </ion-col>
              </ion-row>
            </ion-grid>     
            <ion-grid>
              <ion-row>
                <ion-col col-9>
                  <ion-card-title>
                    {{assesment?.contraceptive?.name}}
                  </ion-card-title>
                  <p class="assesments_user_info">
                    {{user?.firstName}} {{user?.lastName}}
                  </p>
                </ion-col>
                <ion-col col-3>
                  <button [color]="assesment?.success ? 'primary' : 'danger'" ion-button  small (click)="reOrderORRetake(assesment)">{{assesment?.success? "Order":"Retake"}}</button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
